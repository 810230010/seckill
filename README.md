# seckill
针对不同技术选型的秒杀项目

## 整体大致流程
未开始>显示秒杀商品>活动开始>点击秒杀>有库存>生成订单>锁库存>减库存

## 技术选型
### 单机
基于数据库的锁防止超卖
- 悲观锁
- 乐观锁

基于redis的分布式锁以及缓存

基于redis的分布式锁优化(库存锁分段，提高并发率)

基于redis的分布式锁优化(库存锁分段，提高并发率)、redis提前预热缓存 + 消息队列(RabbitMQ、disruptor、kafka)

增加限流, 前端限流(点击过于频繁置灰或者弹出验证码)、后端限流(redis接入层的限流、controller的限流)

页面静态化，限流(点击秒杀按钮置灰一段时间，同一个用户/ip1分钟不能超过几次)，controller限流，redis判断库存是否足够（redis集群），mq入队(mq消息丢失和重复消费问题)，生成订单，减库存

还可以优化的点
1.在内存中判断库存，使用一个定时任务定时同步部分redis库存到本地内存

### 集群

### 微服务
分库分表

分布式事务

限流、熔断、降级 setinel、hystrix
## 后续优化
1.jvm的参数调优

2.Tomcat参数调优

3.redis优化

4.mysql优化

5.mq优化

6.代码优化
## 压测
1.表制造大量历史数据

2.模拟高并发

## 压测报告